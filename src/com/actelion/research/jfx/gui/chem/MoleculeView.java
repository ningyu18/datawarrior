/* * Project: DD_jfx * @(#)MoleculeView.java * * Copyright (c) 1997- 2015 * Actelion Pharmaceuticals Ltd. * Gewerbestrasse 16 * CH-4123 Allschwil, Switzerland * * All Rights Reserved. * * This software is the proprietary information of Actelion Pharmaceuticals, Ltd. * Use is subject to license terms. * * Author: Christian Rufener */package com.actelion.research.jfx.gui.chem;import com.actelion.research.chem.AbstractDepictor;import com.actelion.research.chem.StereoMolecule;import com.actelion.research.jfx.dataformat.MoleculeDataFormats;import com.actelion.research.jfx.gui.misc.ClipboardHelper;import javafx.beans.property.BooleanProperty;import javafx.beans.property.SimpleBooleanProperty;import javafx.beans.property.StringProperty;import javafx.css.PseudoClass;import javafx.scene.control.Control;import javafx.scene.input.Clipboard;import javafx.scene.input.ClipboardContent;import javafx.scene.input.MouseEvent;import javafx.scene.paint.Color;/** * Project: * User: rufenec * Date: 10/12/11 * Time: 4:03 PM */public class MoleculeView extends Control implements IMoleculeView{    // TODO fix this hack!    // used to force class loader to load class MoleculeDataFormats    // (otherwise exception when class get loaded upon drop!!!)    static {        MoleculeDataFormats.DATA_FORMATS.toString();    }    private boolean transparent;    private boolean fillSize = false;    public MoleculeView()    {        this.setPrefSize(100, 100);        this.setSkin(new MoleculeViewSkin(this));    }    public MoleculeView(StereoMolecule mol)    {        this();        setValue(mol);    }    protected void layoutChildren()    {        super.layoutChildren();    }    @Override    public void setMolecule(StereoMolecule r)    {        ((MoleculeViewSkin)this.getSkin()).setMolecule(r);    }    public AbstractDepictor createDepictor(StereoMolecule value)    {        return new JFXCanvasDepictor(value);    }    public javafx.beans.property.ObjectProperty<StereoMolecule> valueProperty()    {        return ((MoleculeViewSkin)this.getSkin()).valueProperty();    }    public StringProperty idcodeProperty()    {        return ((MoleculeViewSkin)this.getSkin()).idcodeProperty();    }    public final void setValue(StereoMolecule t) {        ((MoleculeViewSkin)this.getSkin()).setValue(t);    }    public final StereoMolecule getValue() {        return ((MoleculeViewSkin)this.getSkin()).getValue();    }    public boolean isTransparent()    {        return transparent;    }    public void setTransparent(boolean transparent)    {        this.transparent = transparent;    }    protected ClipboardContent getContent(MouseEvent mouseEvent)    {        return ClipboardHelper.writeContent(getValue());    }    protected boolean putContent(Clipboard clipboard) {        StereoMolecule mol = ClipboardHelper.readContent(clipboard);        if (mol!=null) {            setValue(mol);            return true;        } else {            return false;        }    }    public Color getBackgroundColor()    {        return ((MoleculeViewSkin)this.getSkin()).getBackgroundColor();    }    public void setBackgroundColor(Color c)    {        ((MoleculeViewSkin)this.getSkin()).setBackgroundColor(c);    }    public boolean sizeContent()    {        return fillSize;    }    public void sizeContent(boolean sizeIt)    {        this.fillSize = sizeIt;    }    private static final PseudoClass PSEUDO_CLASS_READONLY            = PseudoClass.getPseudoClass("readonly");    private BooleanProperty editable = new SimpleBooleanProperty(this, "editable", true) {        @Override protected void invalidated() {            pseudoClassStateChanged(PSEUDO_CLASS_READONLY, ! get());        }    };    public final boolean isEditable() { return editable.getValue(); }    public final void setEditable(boolean value) { editable.setValue(value); }    public final BooleanProperty editableProperty() { return editable; }}